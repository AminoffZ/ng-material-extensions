!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/material"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("lodash"),require("util")):"function"==typeof define&&define.amd?define("mat-table-filter",["exports","@angular/material","rxjs","rxjs/operators","@angular/core","lodash","util"],t):t(e["mat-table-filter"]={},e.ng.material,e.rxjs,e.rxjs.operators,e.ng.core,e.LODASH,e.util)}(this,function(e,t,r,i,n,S,v){"use strict";var o={EQUALS:"EQUALS",ANYWHERE:"ANYWHERE",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH"},a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function s(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(){function e(){}return e.prototype.executeCondition=function(e,t){switch(this.handleLetterCasing(e,t.caseSensitive),t.filterType){case o.EQUALS:return this.equals(e);case o.ANYWHERE:return this.anywhere(e);case o.STARTS_WITH:return this.startsWith(e);case o.ENDS_WITH:return this.endsWith(e);default:return!0}},e.prototype.handleLetterCasing=function(e,t){t||this.transformAllLowerCase(e)},e.prototype.transformAllLowerCase=function(e){for(var t in e){var r=e[t];S.isString(r)?e[t]=r.toLowerCase():this.transformAllLowerCase(r)}},e}(),c=function(e){function t(){return e.call(this)||this}return s(t,e),t.warn=function(){console.warn(t.UNSUPPORTED_OPERATION_WARNING),console.warn(t.SUGGESTION_WARNING)},t.prototype.equals=function(e){return S.isEqual(e.example.sort(),e.item.sort())},t.prototype.anywhere=function(e){return this.isSubset(e.example,e.item)},t.prototype.startsWith=function(e){return t.warn(),this.anywhere(e)},t.prototype.endsWith=function(e){return t.warn(),this.anywhere(e)},t.prototype.isSubset=function(e,t){return!S.difference(S.flatten(e),S.flatten(t)).length},t.UNSUPPORTED_OPERATION_WARNING="This filterType is unsupported for array filtering. FilterType.ANYWHERE is executed instead!",t.SUGGESTION_WARNING="You can set a custom predicate for the array property through PropertyOptions!",t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(u),p=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.equals=function(e){return e.example===e.item},t.prototype.anywhere=function(e){return e.item.includes(e.example)},t.prototype.startsWith=function(e){return e.item.startsWith(e.example)},t.prototype.endsWith=function(e){return e.item.endsWith(e.example)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(u),l=function(){function e(e,t){this._alphaNumericService=e,this._arrayService=t}return e.prototype.filterPredicate=function(e,t,r,i){var n,o,a=Object.keys(e.example);try{for(var s=function m(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(a),u=s.next();!u.done;u=s.next()){var c=u.value,p=S.cloneDeep(e.example[c]);if(!(S.isNil(p)||S.every(p,S.isEmpty)&&"boolean"!=typeof p)){if(!e.item.hasOwnProperty(c))return!1;var l=S.cloneDeep(e.item[c]),f=this.getNextPropertyName(i,c),y=this.finalizeOptionsForProperty(r,t,f);if(v.isFunction(y)){if(!y(l))return!1}else{var h=y;if(this.isAlphaNumeric(l)){var d={item:l.toString(),example:p};if(!this._alphaNumericService.executeCondition(d,h))return!1}else if(S.isArray(l)){d={item:l,example:p};if(!this._arrayService.executeCondition(d,h))return!1}else if(S.isBoolean(l)){if(l!==p)return!1}else{d={item:l,example:p};if(!this.filterPredicate(d,t,y,f))return!1}}}}}catch(b){n={error:b}}finally{try{u&&!u.done&&(o=s["return"])&&o.call(s)}finally{if(n)throw n.error}}return!0},e.prototype.finalizeOptionsForProperty=function(e,t,r){return t&&t.hasOwnProperty(r)?t[r]:e},e.prototype.getNextPropertyName=function(e,t){return e?e+"."+t:t},e.prototype.isChanged=function(e,t){return!S.isEqual(this.toPlainJson(e),this.toPlainJson(t))},e.prototype.toPlainJson=function(e){return e?JSON.parse(JSON.stringify(e)):undefined},e.prototype.isAlphaNumeric=function(e){return S.isString(e)||S.isNumber(e)},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:p},{type:c}]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e(n.inject(p),n.inject(c))},token:e,providedIn:"root"}),e}(),f=function(){function e(e,t,r){this._filterService=e,this._injectedTable=t,this._viewContainerRef=r,this.debounceTime=400,this.filterType=o.ANYWHERE,this.caseSensitive=!1,this.initCdkTable(),this.initDebounceSubject()}return e.prototype.ngDoCheck=function(){this._filterService.isChanged(this._oldExampleEntity,this.exampleEntity)&&(this._oldExampleEntity=this._filterService.toPlainJson(this.exampleEntity),this._exampleEntitySubject.next(undefined))},e.prototype.initCdkTable=function(){var e=this._viewContainerRef._data.componentView.component;if(e)this._table=e;else{if(!this._injectedTable)throw new Error("Unsupported Angular version!");this._table=this._injectedTable}},e.prototype.initDebounceSubject=function(){var t=this;this._exampleEntitySubject=new r.BehaviorSubject(null),this._exampleEntitySubject.pipe(i.debounceTime(this.debounceTime)).subscribe(function(e){t.updateFilterPredicate()})},e.prototype.updateFilterPredicate=function(){var e=this.getMatDataSource();e&&(e.filterPredicate=this.getFilterPredicate(),e.filter=this.exampleEntity)},e.prototype.getFilterPredicate=function(){var t=this;return this.customPredicate?this.customPredicate:function(e){return t._filterService.filterPredicate({example:t.exampleEntity,item:e},t.propertyOptions,{filterType:t.filterType,caseSensitive:t.caseSensitive})}},e.prototype.getMatDataSource=function(){return this._table.dataSource},e.decorators=[{type:n.Directive,args:[{selector:"[matTableFilter]",exportAs:"matTableFilter"}]}],e.ctorParameters=function(){return[{type:l},{type:t.MatTable,decorators:[{type:n.Host},{type:n.Self},{type:n.Optional}]},{type:n.ViewContainerRef}]},e.propDecorators={exampleEntity:[{type:n.Input}],debounceTime:[{type:n.Input}],filterType:[{type:n.Input}],caseSensitive:[{type:n.Input}],customPredicate:[{type:n.Input}],propertyOptions:[{type:n.Input}]},e}(),y=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{declarations:[f],imports:[t.MatTableModule],exports:[f]}]}],e}();e.MatTableFilterService=l,e.MatTableFilter=o,e.MatTableFilterDirective=f,e.MatTableFilterModule=y,e.ɵa=p,e.ɵc=c,e.ɵb=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mat-table-filter.umd.min.js.map