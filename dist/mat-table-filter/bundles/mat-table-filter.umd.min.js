!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/material/table"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("util")):"function"==typeof define&&define.amd?define("mat-table-filter",["exports","@angular/core","@angular/material/table","rxjs","rxjs/operators","lodash","util"],t):t((e=e||self)["mat-table-filter"]={},e.ng.core,e.ng.material.table,e.rxjs,e.rxjs.operators,e.lodash,e.util)}(this,(function(e,t,r,i,n,o,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u;function c(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(u=e.MatTableFilter||(e.MatTableFilter={})).EQUALS="EQUALS",u.ANYWHERE="ANYWHERE",u.STARTS_WITH="STARTS_WITH",u.ENDS_WITH="ENDS_WITH";var p=function(){function t(){}return t.prototype.executeCondition=function(t,r){switch(this.handleLetterCasing(t,r.caseSensitive),r.filterType){case e.MatTableFilter.EQUALS:return this.equals(t);case e.MatTableFilter.ANYWHERE:return this.anywhere(t);case e.MatTableFilter.STARTS_WITH:return this.startsWith(t);case e.MatTableFilter.ENDS_WITH:return this.endsWith(t);default:return!0}},t.prototype.handleLetterCasing=function(e,t){t||this.transformAllLowerCase(e)},t.prototype.transformAllLowerCase=function(e){for(var t in e){var r=e[t];o.isString(r)?e[t]=r.toLowerCase():this.transformAllLowerCase(r)}},t}(),f=function(e){function r(){return e.call(this)||this}return l(r,e),r.warn=function(){console.warn(r.UNSUPPORTED_OPERATION_WARNING),console.warn(r.SUGGESTION_WARNING)},r.prototype.equals=function(e){return o.isEqual(e.example.sort(),e.item.sort())},r.prototype.anywhere=function(e){return this.isSubset(e.example,e.item)},r.prototype.startsWith=function(e){return r.warn(),this.anywhere(e)},r.prototype.endsWith=function(e){return r.warn(),this.anywhere(e)},r.prototype.isSubset=function(e,t){return!o.difference(o.flatten(e),o.flatten(t)).length},r.UNSUPPORTED_OPERATION_WARNING="This filterType is unsupported for array filtering. FilterType.ANYWHERE is executed instead!",r.SUGGESTION_WARNING="You can set a custom predicate for the array property through PropertyOptions!",r.ɵfac=function(e){return new(e||r)},r.ɵprov=t["ɵɵdefineInjectable"]({token:r,factory:r.ɵfac,providedIn:"root"}),r}(p),d=function(e){function r(){return e.call(this)||this}return l(r,e),r.prototype.equals=function(e){return e.example===e.item},r.prototype.anywhere=function(e){return e.item.includes(e.example)},r.prototype.startsWith=function(e){return e.item.startsWith(e.example)},r.prototype.endsWith=function(e){return e.item.endsWith(e.example)},r.ɵfac=function(e){return new(e||r)},r.ɵprov=t["ɵɵdefineInjectable"]({token:r,factory:r.ɵfac,providedIn:"root"}),r}(p),h=function(){function e(e,t){this._alphaNumericService=e,this._arrayService=t}return e.prototype.filterPredicate=function(e,t,r,i){var n,s,l=Object.keys(e.example);try{for(var u=c(l),p=u.next();!p.done;p=u.next()){var f=p.value,d=o.cloneDeep(e.example[f]);if(!(o.isNil(d)||o.every(d,o.isEmpty)&&"boolean"!=typeof d)){if(!e.item.hasOwnProperty(f))return!1;var h=o.cloneDeep(e.item[f]),y=this.getNextPropertyName(i,f),m=this.finalizeOptionsForProperty(r,t,y);if(a.isFunction(m)){if(!m(h))return!1}else{var v=m;if(this.isAlphaNumeric(h)){var b={item:h.toString(),example:d};if(!this._alphaNumericService.executeCondition(b,v))return!1}else if(o.isArray(h)){b={item:h,example:d};if(!this._arrayService.executeCondition(b,v))return!1}else if(o.isBoolean(h)){if(h!==d)return!1}else{b={item:h,example:d};if(!this.filterPredicate(b,t,m,y))return!1}}}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}return!0},e.prototype.finalizeOptionsForProperty=function(e,t,r){return t&&t.hasOwnProperty(r)?t[r]:e},e.prototype.getNextPropertyName=function(e,t){return e?e+"."+t:t},e.prototype.isChanged=function(e,t){return!o.isEqual(this.toPlainJson(e),this.toPlainJson(t))},e.prototype.toPlainJson=function(e){return e?JSON.parse(JSON.stringify(e)):void 0},e.prototype.isAlphaNumeric=function(e){return o.isString(e)||o.isNumber(e)},e.ɵfac=function(r){return new(r||e)(t["ɵɵinject"](d),t["ɵɵinject"](f))},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),y=function(){function o(t,r,i){this._filterService=t,this._injectedTable=r,this._viewContainerRef=i,this.debounceTime=400,this.filterType=e.MatTableFilter.ANYWHERE,this.caseSensitive=!1,this.initCdkTable(),this.initDebounceSubject()}return o.prototype.ngDoCheck=function(){this._filterService.isChanged(this._oldExampleEntity,this.exampleEntity)&&(this._oldExampleEntity=this._filterService.toPlainJson(this.exampleEntity),this._exampleEntitySubject.next(void 0))},o.prototype.initCdkTable=function(){var e,t,r=null===(t=null===(e=this._viewContainerRef._data)||void 0===e?void 0:e.componentView)||void 0===t?void 0:t.component;if(r)this._table=r;else{if(!this._injectedTable)throw new Error("Unsupported Angular version!");this._table=this._injectedTable}},o.prototype.initDebounceSubject=function(){var e=this;this._exampleEntitySubject=new i.BehaviorSubject(null),this._exampleEntitySubject.pipe(n.debounceTime(this.debounceTime)).subscribe((function(t){e.updateFilterPredicate()}))},o.prototype.updateFilterPredicate=function(){var e=this.getMatDataSource();e&&(e.filterPredicate=this.getFilterPredicate(),e.filter=this.exampleEntity)},o.prototype.getFilterPredicate=function(){var e=this;return this.customPredicate?this.customPredicate:function(t){return e._filterService.filterPredicate({example:e.exampleEntity,item:t},e.propertyOptions,{filterType:e.filterType,caseSensitive:e.caseSensitive})}},o.prototype.getMatDataSource=function(){return this._table.dataSource},o.ɵfac=function(e){return new(e||o)(t["ɵɵdirectiveInject"](h),t["ɵɵdirectiveInject"](r.MatTable,11),t["ɵɵdirectiveInject"](t.ViewContainerRef))},o.ɵdir=t["ɵɵdefineDirective"]({type:o,selectors:[["","matTableFilter",""]],inputs:{exampleEntity:"exampleEntity",debounceTime:"debounceTime",filterType:"filterType",caseSensitive:"caseSensitive",customPredicate:"customPredicate",propertyOptions:"propertyOptions"},exportAs:["matTableFilter"]}),o}(),m=function(){function e(){}return e.ɵmod=t["ɵɵdefineNgModule"]({type:e}),e.ɵinj=t["ɵɵdefineInjector"]({factory:function(t){return new(t||e)},imports:[[r.MatTableModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t["ɵɵsetNgModuleScope"](m,{declarations:[y],imports:[r.MatTableModule],exports:[y]}),e.MatTableFilterDirective=y,e.MatTableFilterModule=m,e.MatTableFilterService=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mat-table-filter.umd.min.js.map