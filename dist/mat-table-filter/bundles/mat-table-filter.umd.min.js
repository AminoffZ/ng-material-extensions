!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/material"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("util")):"function"==typeof define&&define.amd?define("mat-table-filter",["exports","@angular/core","@angular/material","rxjs","rxjs/operators","lodash","util"],t):t((e=e||self)["mat-table-filter"]={},e.ng.core,e.ng.material,e.rxjs,e.rxjs.operators,e.lodash,e.util)}(this,(function(e,t,r,n,i,o,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function s(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function c(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var p={EQUALS:"EQUALS",ANYWHERE:"ANYWHERE",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH"},l=function(){function e(){}return e.prototype.executeCondition=function(e,t){switch(t){case p.EQUALS:return this.equals(e);case p.ANYWHERE:return this.anywhere(e);case p.STARTS_WITH:return this.startsWith(e);case p.ENDS_WITH:return this.endsWith(e);default:return!0}},e}();var f=function(e){function r(){return e.call(this)||this}return s(r,e),r.prototype.equals=function(e){return o.isEqual(e.example.sort(),e.item.sort())},r.prototype.anywhere=function(e){return this.isSubset(e.example,e.item)},r.prototype.startsWith=function(e){throw new Error("Unsupported Operation")},r.prototype.endsWith=function(e){throw new Error("Unsupported Operation")},r.prototype.isSubset=function(e,t){return!o.difference(o.flatten(e),o.flatten(t)).length},r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[]},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}(l),y=function(e){function r(){return e.call(this)||this}return s(r,e),r.prototype.equals=function(e){return e.example===e.item},r.prototype.anywhere=function(e){return e.item.includes(e.example)},r.prototype.startsWith=function(e){return e.item.startsWith(e.example)},r.prototype.endsWith=function(e){return e.item.endsWith(e.example)},r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[]},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}(l),h=function(){function e(e,t){this._alphaNumericService=e,this._arrayService=t}return e.prototype.filterPredicate=function(e,t,r,n){var i,u,s=Object.keys(e.example);try{for(var p=c(s),l=p.next();!l.done;l=p.next()){var f=l.value,y=e.example[f];if(!(o.isNil(y)||o.every(y,o.isEmpty)&&"boolean"!=typeof y)){if(!e.item.hasOwnProperty(f))return!1;var h=e.item[f],d=this.getNextPropertyName(n,f),m=this.getOptionsForColumn(r,t,d);if(a.isFunction(m)){if(!m(h))return!1}else{var b={item:h,example:y},v=m;if(this.isAlphaNumeric(h)){if(this.handleLetterCasing(b,v.caseSensitive),!this._alphaNumericService.executeCondition(b,v.filterType))return!1}else if(o.isArray(h)){if(!this._arrayService.executeCondition(b,v.filterType))return!1}else if(o.isBoolean(h)){if(h!==y)return!1}else if(!this.filterPredicate(b,t,m,d))return!1}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(u=p.return)&&u.call(p)}finally{if(i)throw i.error}}return!0},e.prototype.handleLetterCasing=function(e,t){t||(e.example=e.example.toUpperCase(),e.item=e.item.toUpperCase())},e.prototype.getOptionsForColumn=function(e,t,r){return t&&t.hasOwnProperty(r)?t[r]:e},e.prototype.getNextPropertyName=function(e,t){return e?e+"."+t:t},e.prototype.isChanged=function(e,t){return!o.isEqual(this.toPlainJson(e),this.toPlainJson(t))},e.prototype.toPlainJson=function(e){return e?JSON.parse(JSON.stringify(e)):void 0},e.prototype.isAlphaNumeric=function(e){return o.isString(e)||o.isNumber(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:y},{type:f}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(y),t.ɵɵinject(f))},token:e,providedIn:"root"}),e}();var d=function(){function e(e,t,r){this._filterService=e,this._injectedTable=t,this._viewContainerRef=r,this.debounceTime=400,this.filterType=p.ANYWHERE,this.caseSensitive=!1,this.initCdkTable(),this.initDebounceSubject()}return e.prototype.ngDoCheck=function(){this._filterService.isChanged(this._oldExampleEntity,this.exampleEntity)&&(this._oldExampleEntity=this._filterService.toPlainJson(this.exampleEntity),this._exampleEntitySubject.next())},e.prototype.initCdkTable=function(){var e=this._viewContainerRef._data.componentView.component;if(e)this._table=e;else{if(!this._injectedTable)throw new Error("Unsupported Angular version!");this._table=this._injectedTable}},e.prototype.initDebounceSubject=function(){var e=this;this._exampleEntitySubject=new n.BehaviorSubject(null),this._exampleEntitySubject.pipe(i.debounceTime(this.debounceTime)).subscribe((function(t){e.updateFilterPredicate()}))},e.prototype.updateFilterPredicate=function(){var e=this.getMatDataSource();e&&(e.filterPredicate=this.getFilterPredicate(),e.filter=this.exampleEntity)},e.prototype.getFilterPredicate=function(){var e=this;return this.customPredicate?this.customPredicate:function(t){return e._filterService.filterPredicate({example:e.exampleEntity,item:t},e.columnOptions,{filterType:e.filterType,caseSensitive:e.caseSensitive})}},e.prototype.getMatDataSource=function(){return this._table.dataSource},e.decorators=[{type:t.Directive,args:[{selector:"[matTableFilter]",exportAs:"matTableFilter"}]}],e.ctorParameters=function(){return[{type:h},{type:r.MatTable,decorators:[{type:t.Host},{type:t.Self},{type:t.Optional}]},{type:t.ViewContainerRef}]},e.propDecorators={exampleEntity:[{type:t.Input}],debounceTime:[{type:t.Input}],filterType:[{type:t.Input}],caseSensitive:[{type:t.Input}],customPredicate:[{type:t.Input}],columnOptions:[{type:t.Input}]},e}();var m=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[d],imports:[r.MatTableModule],exports:[d]}]}],e}();e.MatTableFilter=p,e.MatTableFilterModule=m,e.MatTableFilterService=h,e.ɵa=d,e.ɵb=y,e.ɵc=l,e.ɵd=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mat-table-filter.umd.min.js.map